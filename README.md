# wdio-electron-service

## WebdriverIO service for testing Electron applications

Handles electron-specific browser capabilities, chromedriver execution and session management.

## Installation

```bash
npm i -D wdio-electron-service
```

```bash
yarn i -D wdio-electron-service
```

```bash
pnpm i -D wdio-electron-service
```

`wdio-electron-service` installs its own chromedriver via `electron-chromedriver`, so you shouldn't need to install it.

Instructions on how to install `WebdriverIO` can be found [here.](https://webdriver.io/docs/gettingstarted)

## Example Configuration

In order to use the service you need to add `electron` to your service array:

```js
// wdio.conf.js
const { join } = require('path');
const fs = require('fs');

const packageJson = JSON.parse(fs.readFileSync('./package.json'));
const {
  build: { productName },
} = packageJson;

const config = {
  outputDir: 'all-logs',
  // ...
  services: [
    [
      'electron',
      {
        appPath: join(__dirname, 'dist'),
        appName: productName,
        appArgs: ['foo', 'bar=baz'],
        port: 9519,
        logFileName: 'wdio-chromedriver.log',
      },
    ],
  ],
  // ...
};

module.exports = { config };
```

### Configuration

This service wraps the `wdio-chromedriver-service`, so all configuration for that service applies here and will be passed through.

#### `appPath`: string

The path to the built app for testing. In a typical electron project this will be where `electron-builder` is configured to output, e.g. `dist` by default. Required to be used with `appName` as both are needed in order to generate a path to the Electron binary.

#### `appName`: string

The name of the built app for testing. Required to be used with `appPath` as both are needed in order to generate a path to the Electron binary.

It needs to be the same as the install directory used by `electron-builder`, which is derived from your `package.json` configuration - either `name` or `productName`. You can find more information regarding this in the `electron-builder` [documentation](https://www.electron.build/configuration/configuration#configuration).

#### `binaryPath`: string

The path to the electron binary of the app for testing. The path generated by using `appPath` and `appName` is tied to `electron-builder` output, if you are implementing something custom then you can use this.

#### `appArgs`: string[]

An array of string arguments to be passed through to the app on execution of the test run.

#### `port`: number

`wdio-chromedriver-service` option. The port on which chromedriver should run.

#### `path`: string

`wdio-chromedriver-service` option. The path on which chromedriver should run.

#### `protocol`: string

`wdio-chromedriver-service` option. The protocol chromedriver should use.

#### `hostname`: string

`wdio-chromedriver-service` option. The hostname chromedriver should use.

#### `outputDir`: string

`wdio-chromedriver-service` option. The path where the output log of the ChromeDriver server should be stored.

#### `logFileName`: string

`wdio-chromedriver-service` option. The name of the output log file to be written in the `outputDir`.

#### `chromedriverCustomPath`: string

`wdio-chromedriver-service` option. The path to a custom chromedriver different to that installed via the `chromedriver` npm module. This is set by `wdio-electron-service` to the chromedriver installed via `electron-chromedriver` and also used to manage chromedriver execution on windows platforms, but you can overwrite it if required.
