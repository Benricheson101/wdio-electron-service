# wdio-electron-service

## WebdriverIO service for testing Electron applications

Handles electron-specific browser capabilities, chromedriver execution and session management.

## Installation

```bash
npm i -D wdio-electron-service
```

```bash
yarn i -D wdio-electron-service
```

```bash
pnpm i -D wdio-electron-service
```

`wdio-electron-service` installs chromedriver via [`electron-chromedriver`](https://github.com/electron/chromedriver), so you shouldn't need to install your own version.

Instructions on how to install `WebdriverIO` can be found [here.](https://webdriver.io/docs/gettingstarted)

## Example Configuration

To use the service you need to add `electron` to your services array, followed by a configuration object:

```js
// wdio.conf.js
const { join } = require('path');
const fs = require('fs');

const packageJson = JSON.parse(fs.readFileSync('./package.json'));
const {
  build: { productName },
} = packageJson;

const config = {
  outputDir: 'all-logs',
  // ...
  services: [
    [
      'electron',
      {
        appPath: join(__dirname, 'dist'),
        appName: productName,
        appArgs: ['foo', 'bar=baz'],
        port: 9519,
        logFileName: 'wdio-chromedriver.log',
      },
    ],
  ],
  // ...
};

module.exports = { config };
```

## Configuration

This service wraps the [`wdio-chromedriver-service`](https://github.com/webdriverio-community/wdio-chromedriver-service), so all configuration for that service applies here and will be passed through.

### `appPath`: _`string`_

The path to the built app for testing. In a typical electron project this will be where `electron-builder` is configured to output, e.g. `dist` by default. Required to be used with `appName` as both are needed in order to generate a path to the Electron binary.

### `appName`: _`string`_

The name of the built app for testing. Required to be used with `appPath` as both are needed in order to generate a path to the Electron binary.

It needs to be the same as the install directory used by `electron-builder`, which is derived from your `package.json` configuration and `electron-builder` configuration - it is either the `name` property (from `package.json`) or the `productName` property (from `electron-builder` config). You can find more information regarding this in the `electron-builder` [documentation](https://www.electron.build/configuration/configuration#configuration).

### `binaryPath`: _`string`_

The path to the electron binary of the app for testing. The path generated by using `appPath` and `appName` is tied to `electron-builder` output, if you are implementing something custom then you can use this.

### `appArgs`: _`string[]`_

An array of string arguments to be passed through to the app on execution of the test run.

### `port`: _`number`_

#### default `9515`

`wdio-chromedriver-service` option. The port on which chromedriver should run.

### `path`: _`string`_

#### default `/`

`wdio-chromedriver-service` option. The path on which chromedriver should run.

### `protocol`: _`string`_

#### default `http`

`wdio-chromedriver-service` option. The protocol chromedriver should use.

### `hostname`: _`string`_

#### default `localhost`

`wdio-chromedriver-service` option. The hostname chromedriver should use.

### `outputDir`: _`string`_

#### default defined by [`config.outputDir`](https://webdriver.io/docs/options/#outputdir)

`wdio-chromedriver-service` option. The path where the output log of the chromedriver server should be stored. If not specified, the WDIO `outputDir` config property is used and chromedriver logs are written to the same directory as the WDIO logs.

### `logFileName`: _`string`_

#### default `wdio-chromedriver.log`

`wdio-chromedriver-service` option. The name of the output log file to be written in the `outputDir`.

### `chromedriverCustomPath`: _`string`_

#### default defined by [`electron-chromedriver`](https://github.com/electron/chromedriver)

`wdio-chromedriver-service` option. The path to a custom chromedriver different to that installed via the `chromedriver` npm module. This is set by `wdio-electron-service` to the chromedriver installed via `electron-chromedriver` and also used to manage chromedriver execution on windows platforms, but you can overwrite it if required.
